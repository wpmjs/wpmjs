import{_ as s,o as a,c as n,Q as p}from"./chunks/framework.933211d3.js";const l="/wpmjs/build/assets/17000385880541.0d192f07.jpg",m=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"api/wpmjs.md","filePath":"api/wpmjs.md","lastUpdated":1705906671000}'),o={name:"api/wpmjs.md"},e=p(`<h2 id="wpmjs-web-package-manager" tabindex="-1">wpmjsï¼ˆweb package managerï¼‰ <a class="header-anchor" href="#wpmjs-web-package-manager" aria-label="Permalink to &quot;wpmjsï¼ˆweb package managerï¼‰&quot;">â€‹</a></h2><p>wpmjsæ˜¯ä¸€ä¸ªèƒ½å¤ŸåŠ è½½umdã€systemã€module-federationå¹¶å…±äº«ä¾èµ–çš„åŠ è½½å™¨, æ”¯æŒè‡ªå®šä¹‰æˆ–æ‰©å±•æ¨¡å—åŠ è½½å™¨ã€æ”¯æŒå¤šç‰ˆæœ¬å…±å­˜, è¿˜é…å¥—äº†è°ƒè¯•æ’ä»¶å’Œæ‰“åŒ…å·¥å…·æ’ä»¶</p><blockquote><p>é»˜è®¤ä½¿ç”¨<a href="https://npmjs.com/package/systemjs" target="_blank" rel="noreferrer">systemjs</a>å’Œ<a href="https://npmjs.com/package/module-federation-runtime" target="_blank" rel="noreferrer">module-federation-runtime</a>æ¥åŠ è½½å„ç§æ¨¡å—, ä¹Ÿå¯ä»¥é‡æ–°è‡ªè¡Œå®ç°é»˜è®¤è¡Œä¸º</p></blockquote><h2 id="åœ¨çº¿ç¤ºä¾‹" tabindex="-1">åœ¨çº¿ç¤ºä¾‹ <a class="header-anchor" href="#åœ¨çº¿ç¤ºä¾‹" aria-label="Permalink to &quot;åœ¨çº¿ç¤ºä¾‹&quot;">â€‹</a></h2><p><a href="https://zhanghongen.github.io/universal-module-federation-plugin/" target="_blank" rel="noreferrer">å»ä½“éªŒ</a>, ä¸‹é¢çš„demoæ¼”ç¤ºäº†ä½¿ç”¨ è¿œç¨‹mfæ¨¡å— + è¿œç¨‹umdæ¨¡å— + æœ¬åœ°reactæ¨¡å—</p><blockquote><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> wpmjs </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;wpmjs&quot;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> React </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;react&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">setConfig</span><span style="color:#E1E4E8;">({ baseUrl: </span><span style="color:#9ECBFF;">&quot;https://cdn.jsdelivr.net/npm&quot;</span><span style="color:#E1E4E8;"> })</span></span>
<span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">addImportMap</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// ç»Ÿä¸€åŸŸå</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;antd&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;antd@5.9.0/dist/antd.min.js&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;dayjs&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;dayjs@1.11.1&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// è‡ªå®šä¹‰url</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;mf-app-01&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;mfapp01@https://cdn.jsdelivr.net/npm/mf-app-01@1.0.5/dist/remoteEntry.js&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;react-dom&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.development.js&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"><span style="color:#6A737D;">// umdã€systemã€mféƒ½ä¼šä¼˜å…ˆå¯»æ‰¾æ­¤å¤„å†™å…¥çš„ä¾èµ–</span></span>
<span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">setShared</span><span style="color:#E1E4E8;">({ name: </span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">, version: </span><span style="color:#9ECBFF;">&quot;18.2.0&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">: () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> React })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> wpmjs.</span><span style="color:#B392F0;">import</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;mf-app-01&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> wpmjs.</span><span style="color:#B392F0;">import</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;antd&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> wpmjs </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;wpmjs&quot;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> React </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;react&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">setConfig</span><span style="color:#24292E;">({ baseUrl: </span><span style="color:#032F62;">&quot;https://cdn.jsdelivr.net/npm&quot;</span><span style="color:#24292E;"> })</span></span>
<span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">addImportMap</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// ç»Ÿä¸€åŸŸå</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;antd&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;antd@5.9.0/dist/antd.min.js&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;dayjs&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;dayjs@1.11.1&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// è‡ªå®šä¹‰url</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;mf-app-01&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;mfapp01@https://cdn.jsdelivr.net/npm/mf-app-01@1.0.5/dist/remoteEntry.js&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;react-dom&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.development.js&quot;</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"><span style="color:#6A737D;">// umdã€systemã€mféƒ½ä¼šä¼˜å…ˆå¯»æ‰¾æ­¤å¤„å†™å…¥çš„ä¾èµ–</span></span>
<span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">setShared</span><span style="color:#24292E;">({ name: </span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">, version: </span><span style="color:#032F62;">&quot;18.2.0&quot;</span><span style="color:#24292E;">, </span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">: () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> React })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">await</span><span style="color:#24292E;"> wpmjs.</span><span style="color:#6F42C1;">import</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;mf-app-01&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">await</span><span style="color:#24292E;"> wpmjs.</span><span style="color:#6F42C1;">import</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;antd&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">)</span></span></code></pre></div></blockquote><h3 id="develop-plugins-è°ƒè¯•æ’ä»¶" tabindex="-1">develop-pluginsï¼ˆè°ƒè¯•æ’ä»¶ï¼‰ <a class="header-anchor" href="#develop-plugins-è°ƒè¯•æ’ä»¶" aria-label="Permalink to &quot;develop-pluginsï¼ˆè°ƒè¯•æ’ä»¶ï¼‰&quot;">â€‹</a></h3><p>develop-pluginsæ˜¯ä¸€ä¸ªå¯æ‰©å±•çš„è°ƒè¯•é¢æ¿ï¼ˆ<a href="./../contribute/develop-plugins.html">å¼€å‘è°ƒè¯•æ’ä»¶</a>ï¼‰, ç³»ç»Ÿæ’ä»¶connectå’Œaliaså¯ä»¥æä¾›ä¸€é”®åˆ‡æ¢æœ¬åœ°dev-serverå’Œè°ƒè¯•æŒ‡å®šç‰ˆæœ¬çš„èƒ½åŠ›ã€‚ <img src="`+l+`" alt=""></p><h3 id="æ„å»ºå·¥å…·" tabindex="-1">æ„å»ºå·¥å…· <a class="header-anchor" href="#æ„å»ºå·¥å…·" aria-label="Permalink to &quot;æ„å»ºå·¥å…·&quot;">â€‹</a></h3><p>ä½¿ç”¨åŒæ­¥è¯­æ³•åŠ è½½è¿œç¨‹æ¨¡å—</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// bootstrap.js</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> React </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// react is remote module</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// bootstrap.js</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> React </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// react is remote module</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// webpack.config.js</span></span>
<span class="line"><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NpmFederation</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  remotes: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;react-dom&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.development.js&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  shared: {react: {}}</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// webpack.config.js</span></span>
<span class="line"><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NpmFederation</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">  remotes: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;react-dom&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.development.js&quot;</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">  shared: {react: {}}</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div><ol><li><a href="https://github.com/zhangHongEn/universal-module-federation-plugin/tree/main/packages/npm-federation-webpack" target="_blank" rel="noreferrer">npm-federation</a></li></ol><h3 id="åŠ è½½å™¨" tabindex="-1">åŠ è½½å™¨ <a class="header-anchor" href="#åŠ è½½å™¨" aria-label="Permalink to &quot;åŠ è½½å™¨&quot;">â€‹</a></h3><p>ä¿®æ”¹é»˜è®¤åŠ è½½å™¨æˆ–å¼€å‘æ–°åŠ è½½å™¨è¯·çœ‹API: registerLoader() éƒ¨åˆ†</p><h2 id="api" tabindex="-1">API <a class="header-anchor" href="#api" aria-label="Permalink to &quot;API&quot;">â€‹</a></h2><h2 id="setconfig" tabindex="-1">setConfig() <a class="header-anchor" href="#setconfig" aria-label="Permalink to &quot;setConfig()&quot;">â€‹</a></h2><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">setConfig</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  baseUrl: string; </span><span style="color:#6A737D;">// ç»Ÿä¸€url</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">defaultModuleType</span><span style="color:#E1E4E8;">(name): string; </span><span style="color:#6A737D;">// åŠ è½½æœªè®¾ç½®moduleTypeçš„æ¨¡å—æ—¶ä½¿ç”¨çš„æ¨¡å—ç±»å‹</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">defaultVersion</span><span style="color:#E1E4E8;">(name: string): string; </span><span style="color:#6A737D;">// åŠ è½½æœªè®¾ç½®packageVersionçš„æ¨¡å—æ—¶ä½¿ç”¨çš„ç‰ˆæœ¬</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">defaultImportMap</span><span style="color:#E1E4E8;">(name: string): Map; </span><span style="color:#6A737D;">// è¯¦çœ‹addImportMap</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">defaultGlobal</span><span style="color:#E1E4E8;">({name, version}): string; </span><span style="color:#6A737D;">// åŠ è½½æœªè®¾ç½®globalçš„æ¨¡å—æ—¶ä½¿ç”¨çš„key</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">setConfig</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">  baseUrl: string; </span><span style="color:#6A737D;">// ç»Ÿä¸€url</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">defaultModuleType</span><span style="color:#24292E;">(name): string; </span><span style="color:#6A737D;">// åŠ è½½æœªè®¾ç½®moduleTypeçš„æ¨¡å—æ—¶ä½¿ç”¨çš„æ¨¡å—ç±»å‹</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">defaultVersion</span><span style="color:#24292E;">(name: string): string; </span><span style="color:#6A737D;">// åŠ è½½æœªè®¾ç½®packageVersionçš„æ¨¡å—æ—¶ä½¿ç”¨çš„ç‰ˆæœ¬</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">defaultImportMap</span><span style="color:#24292E;">(name: string): Map; </span><span style="color:#6A737D;">// è¯¦çœ‹addImportMap</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">defaultGlobal</span><span style="color:#24292E;">({name, version}): string; </span><span style="color:#6A737D;">// åŠ è½½æœªè®¾ç½®globalçš„æ¨¡å—æ—¶ä½¿ç”¨çš„key</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div><p>å…¨å±€é…ç½®</p><ol><li>æ³¨æ„, è¿™ä¸ªdemoå¹¶ä¸æ˜¯wpmjsçš„é»˜è®¤å€¼<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">setConfig</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  baseUrl: </span><span style="color:#9ECBFF;">&quot;https://cdn.jsdelivr.net/npm/&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">defaultModuleType</span><span style="color:#E1E4E8;">() { </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;system&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">defaultVersion</span><span style="color:#E1E4E8;">() { </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;latest&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">defaultImportMap</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">name</span><span style="color:#E1E4E8;">) { </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> {packageName: name, packageQuery: </span><span style="color:#9ECBFF;">&quot;v=&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+new</span><span style="color:#E1E4E8;"> Date} },</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">defaultGlobal</span><span style="color:#E1E4E8;">({</span><span style="color:#FFAB70;">name</span><span style="color:#E1E4E8;">}) {</span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> name}</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">setConfig</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">  baseUrl: </span><span style="color:#032F62;">&quot;https://cdn.jsdelivr.net/npm/&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">defaultModuleType</span><span style="color:#24292E;">() { </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;system&quot;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">defaultVersion</span><span style="color:#24292E;">() { </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;latest&quot;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">defaultImportMap</span><span style="color:#24292E;">(</span><span style="color:#E36209;">name</span><span style="color:#24292E;">) { </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> {packageName: name, packageQuery: </span><span style="color:#032F62;">&quot;v=&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+new</span><span style="color:#24292E;"> Date} },</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">defaultGlobal</span><span style="color:#24292E;">({</span><span style="color:#E36209;">name</span><span style="color:#24292E;">}) {</span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> name}</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div></li></ol><h2 id="addimportmap" tabindex="-1">addImportMap() <a class="header-anchor" href="#addimportmap" aria-label="Permalink to &quot;addImportMap()&quot;">â€‹</a></h2><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">addImportMap</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  [key: string]: string </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    url?: string; </span><span style="color:#6A737D;">// è‡ªå®šä¹‰url</span></span>
<span class="line"><span style="color:#E1E4E8;">    global</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> string; </span><span style="color:#6A737D;">// globalçš„å˜é‡å</span></span>
<span class="line"><span style="color:#E1E4E8;">    moduleType</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> string; </span><span style="color:#6A737D;">// æ¨¡å—ç±»å‹</span></span>
<span class="line"><span style="color:#E1E4E8;">    packageName</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> string; </span><span style="color:#6A737D;">// åŒ…å, ä¼šç”¨ä½œç»Ÿä¸€urlè§„åˆ™çš„æ‹¼æ¥</span></span>
<span class="line"><span style="color:#E1E4E8;">    packageQuery</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> string; </span><span style="color:#6A737D;">// æŸ¥è¯¢å‚æ•°, ä¼šç”¨ä½œç»Ÿä¸€urlè§„åˆ™çš„æ‹¼æ¥ </span></span>
<span class="line"><span style="color:#E1E4E8;">    packageVersion</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> string; </span><span style="color:#6A737D;">// åŒ…ç‰ˆæœ¬, ä¼šç”¨ä½œç»Ÿä¸€urlè§„åˆ™çš„æ‹¼æ¥</span></span>
<span class="line"><span style="color:#E1E4E8;">    packageFilename</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> string; </span><span style="color:#6A737D;">// åŒ…å…¥å£æ–‡ä»¶, ä¼šç”¨ä½œåŒæ„urlè§„åˆ™çš„æ‹¼æ¥</span></span>
<span class="line"><span style="color:#E1E4E8;">    strictVersion</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> boolean; </span><span style="color:#6A737D;">// è·å–åˆ°çš„å…±äº«æ¨¡å—ä¸æŒ‡å®šç‰ˆæœ¬ä¸ç¬¦åˆ™ä¼šå‘èµ·è¯·æ±‚åŠ è½½æŒ‡å®šç‰ˆæœ¬</span></span>
<span class="line"><span style="color:#E1E4E8;">    shareScope</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> string; </span><span style="color:#6A737D;">// å¯»æ‰¾ä¾èµ–çš„ç©ºé—´</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">addImportMap</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">  [key: string]: string </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    url?: string; </span><span style="color:#6A737D;">// è‡ªå®šä¹‰url</span></span>
<span class="line"><span style="color:#24292E;">    global</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> string; </span><span style="color:#6A737D;">// globalçš„å˜é‡å</span></span>
<span class="line"><span style="color:#24292E;">    moduleType</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> string; </span><span style="color:#6A737D;">// æ¨¡å—ç±»å‹</span></span>
<span class="line"><span style="color:#24292E;">    packageName</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> string; </span><span style="color:#6A737D;">// åŒ…å, ä¼šç”¨ä½œç»Ÿä¸€urlè§„åˆ™çš„æ‹¼æ¥</span></span>
<span class="line"><span style="color:#24292E;">    packageQuery</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> string; </span><span style="color:#6A737D;">// æŸ¥è¯¢å‚æ•°, ä¼šç”¨ä½œç»Ÿä¸€urlè§„åˆ™çš„æ‹¼æ¥ </span></span>
<span class="line"><span style="color:#24292E;">    packageVersion</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> string; </span><span style="color:#6A737D;">// åŒ…ç‰ˆæœ¬, ä¼šç”¨ä½œç»Ÿä¸€urlè§„åˆ™çš„æ‹¼æ¥</span></span>
<span class="line"><span style="color:#24292E;">    packageFilename</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> string; </span><span style="color:#6A737D;">// åŒ…å…¥å£æ–‡ä»¶, ä¼šç”¨ä½œåŒæ„urlè§„åˆ™çš„æ‹¼æ¥</span></span>
<span class="line"><span style="color:#24292E;">    strictVersion</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> boolean; </span><span style="color:#6A737D;">// è·å–åˆ°çš„å…±äº«æ¨¡å—ä¸æŒ‡å®šç‰ˆæœ¬ä¸ç¬¦åˆ™ä¼šå‘èµ·è¯·æ±‚åŠ è½½æŒ‡å®šç‰ˆæœ¬</span></span>
<span class="line"><span style="color:#24292E;">    shareScope</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> string; </span><span style="color:#6A737D;">// å¯»æ‰¾ä¾èµ–çš„ç©ºé—´</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div><p>é…ç½®æ¨¡å—æ˜ å°„, å¤šä¸ªå±æ€§å¯åˆ†å¤šæ¬¡é…ç½®, æ¯ä¸ªå±æ€§ä»¥ç¬¬ä¸€æ¬¡æ³¨å†Œä¸ºå‡†, å¤šæ¬¡æ³¨å†Œä¸ä¼šäº§ç”Ÿè¦†ç›–ã€‚å…¶ä¸­å¦‚æœæœ‰ä¸è§„åˆ™çš„è¿œç¨‹æ¨¡å—é“¾æ¥å¯ä»¥è®¾ç½®urlå±æ€§, å¦åˆ™æ¨èé€šè¿‡packageNameã€packageVersionç­‰å±æ€§ç»Ÿä¸€ç®¡ç†è¿œç¨‹æ¨¡å—çš„é“¾æ¥ã€‚</p><ol><li>å­—ç¬¦ä¸²ç®€å†™è¯­æ³•: é€šè¿‡urlæ˜ å°„umdå’Œmfæ¨¡å— <ol><li>global@https?ğŸ˜•/å¼€å¤´çš„è®¾ç½®ä¸ºmf<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">addImportMap</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// ç­‰åŒäºé…ç½®: {moduleType: &quot;mf&quot;, global, url}</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;mf-app-01&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;mfapp01@https://cdn.jsdelivr.net/npm/mf-app-01@1.0.5/dist/remoteEntry.js&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">addImportMap</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// ç­‰åŒäºé…ç½®: {moduleType: &quot;mf&quot;, global, url}</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;mf-app-01&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;mfapp01@https://cdn.jsdelivr.net/npm/mf-app-01@1.0.5/dist/remoteEntry.js&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div></li><li>https?ğŸ˜•/å¼€å¤´çš„è®¾ç½®ä¸ºsystem<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">addImportMap</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// ç­‰åŒäºé…ç½®: {moduleType: &quot;system&quot;, url}</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;react-dom&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.development.js&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">addImportMap</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// ç­‰åŒäºé…ç½®: {moduleType: &quot;system&quot;, url}</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;react-dom&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.development.js&quot;</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div></li></ol></li><li>ç®€å†™è¯­æ³•: é€šè¿‡npmåŒ…åè¯­æ³•æ˜ å°„é…ç½® <ol><li>å«æœ‰remoteEntry.jsè®¾ç½®ä¸ºmf<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">addImportMap</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// ç­‰åŒäºé…ç½®: {moduleType: &quot;mf&quot;, packageName: &quot;mf-app-01&quot;, packageVersion: &quot;1.0.5&quot;, packageFilename: &quot;dist/remoteEntry.js&quot;}</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;mf-app-01&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;mf-app-01@1.0.5/dist/remoteEntry.js&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">addImportMap</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// ç­‰åŒäºé…ç½®: {moduleType: &quot;mf&quot;, packageName: &quot;mf-app-01&quot;, packageVersion: &quot;1.0.5&quot;, packageFilename: &quot;dist/remoteEntry.js&quot;}</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;mf-app-01&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;mf-app-01@1.0.5/dist/remoteEntry.js&quot;</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div></li><li>æ— remoteEntry.jsè®¾ç½®ä¸ºsystem<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">addImportMap</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// ç­‰åŒäºé…ç½®: {moduleType: &quot;system&quot;, packageName: &quot;react-dom&quot;, packageFilename: &quot;dist/umd/react-dom.development.js&quot;}</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;react-dom&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;react-dom/umd/react-dom.development.js&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">addImportMap</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// ç­‰åŒäºé…ç½®: {moduleType: &quot;system&quot;, packageName: &quot;react-dom&quot;, packageFilename: &quot;dist/umd/react-dom.development.js&quot;}</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;react-dom&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;react-dom/umd/react-dom.development.js&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div></li><li>æ— filenameä¸è®¾ç½®moduleType<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">addImportMap</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;">// ç­‰åŒäºé…ç½®: {packageName: &quot;react&quot;, packageVersion: &quot;18.2.0&quot;}</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;react@18.2.0&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">addImportMap</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#6A737D;">// ç­‰åŒäºé…ç½®: {packageName: &quot;react&quot;, packageVersion: &quot;18.2.0&quot;}</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;react@18.2.0&quot;</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div></li></ol></li><li>å¯¹è±¡è¯­æ³•: å¯ä»¥åˆ†å¤šæ¬¡åˆ†åˆ«è®¾ç½®{moduleType, global, packageName, packageQuery, packageVersion, packageFilename, strictVersion, shareScope } ã€‚ <ol><li>å•ç‹¬è®¾ç½®åŒ…ç‰ˆæœ¬<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">addImportMap</span><span style="color:#E1E4E8;">({ </span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">: {packageVersion: </span><span style="color:#9ECBFF;">&quot;18.2.0&quot;</span><span style="color:#E1E4E8;">, moduleType: </span><span style="color:#9ECBFF;">&quot;system&quot;</span><span style="color:#E1E4E8;">}, </span><span style="color:#9ECBFF;">&quot;react-dom&quot;</span><span style="color:#E1E4E8;">: { packageVersion: </span><span style="color:#9ECBFF;">&quot;18.2.0&quot;</span><span style="color:#E1E4E8;"> } })</span></span>
<span class="line"><span style="color:#6A737D;">// react-domä¼šä½¿ç”¨18.2.0ç‰ˆæœ¬è€Œä¸æ˜¯17.0.2</span></span>
<span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">addImportMap</span><span style="color:#E1E4E8;">({ </span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;react-dom&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;react-dom@17.0.2/umd/react-dom.development.js&quot;</span><span style="color:#E1E4E8;"> })</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">addImportMap</span><span style="color:#24292E;">({ </span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">: {packageVersion: </span><span style="color:#032F62;">&quot;18.2.0&quot;</span><span style="color:#24292E;">, moduleType: </span><span style="color:#032F62;">&quot;system&quot;</span><span style="color:#24292E;">}, </span><span style="color:#032F62;">&quot;react-dom&quot;</span><span style="color:#24292E;">: { packageVersion: </span><span style="color:#032F62;">&quot;18.2.0&quot;</span><span style="color:#24292E;"> } })</span></span>
<span class="line"><span style="color:#6A737D;">// react-domä¼šä½¿ç”¨18.2.0ç‰ˆæœ¬è€Œä¸æ˜¯17.0.2</span></span>
<span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">addImportMap</span><span style="color:#24292E;">({ </span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;react-dom&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;react-dom@17.0.2/umd/react-dom.development.js&quot;</span><span style="color:#24292E;"> })</span></span></code></pre></div></li></ol></li></ol><h2 id="import" tabindex="-1">import() <a class="header-anchor" href="#import" aria-label="Permalink to &quot;import()&quot;">â€‹</a></h2><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">import</span><span style="color:#E1E4E8;">(request: string): </span><span style="color:#79B8FF;">Promise</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">Module </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> any</span><span style="color:#F97583;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">import</span><span style="color:#24292E;">(request: string): </span><span style="color:#005CC5;">Promise</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">Module </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> any</span><span style="color:#D73A49;">&gt;</span></span></code></pre></div><p>åŠ è½½å¹¶è·å–è¿œç¨‹æ¨¡å—, ä¼šè‡ªåŠ¨ç¼“å­˜ä¸è¿›è¡Œå¤šæ¬¡è¯·æ±‚, requestå¯ä»¥æ˜¯ä¸€ä¸ªæ¨¡å—å, ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ¨¡å—+å…¥å£è·¯å¾„å</p><ol><li>ç›´æ¥åŠ è½½æŸä¸ªå…¥å£, ç»“æœç­‰åŒäº2</li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">entry</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> wpmjs.</span><span style="color:#B392F0;">import</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;mf-app-01/App&quot;</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">entry</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> wpmjs.</span><span style="color:#6F42C1;">import</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;mf-app-01/App&quot;</span><span style="color:#24292E;">)</span></span></code></pre></div><ol start="2"><li>åªåŠ è½½æŸä¸ªæ¨¡å—, ä¸åŠ è½½å…·ä½“çš„å…¥å£</li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">module</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> wpmjs.</span><span style="color:#B392F0;">import</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;mf-app-01&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#6A737D;">// éœ€è¦çš„æ—¶å€™å†åŠ è½½å…¥å£./App</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">entry</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> container.</span><span style="color:#B392F0;">$getEntry</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;./App&quot;</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">module</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> wpmjs.</span><span style="color:#6F42C1;">import</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;mf-app-01&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#6A737D;">// éœ€è¦çš„æ—¶å€™å†åŠ è½½å…¥å£./App</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">entry</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> container.</span><span style="color:#6F42C1;">$getEntry</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;./App&quot;</span><span style="color:#24292E;">)</span></span></code></pre></div><blockquote><p>å¯¹åº”å†™æ³•2, å…¥å‚æ˜¯ä¸€ä¸ªæ¨¡å—åä¸åŒ…å«å…¥å£è·¯å¾„çš„æ—¶å€™, ä¼šä¸ºè¿”å›å€¼æŒ‚è½½$getEntryæ¥æŠ¹å¹³å„ç§ç±»å‹çš„æ¨¡å—è·å–å…¥å£çš„æ–¹å¼ã€‚wpmjsä¸ºæ¯ç§æ¨¡å—æä¾›äº†é»˜è®¤çš„å…¥å£è§£æè¡Œä¸º, ä½†ä½ ä¹Ÿå¯ä»¥è¿›è¡Œè‡ªå®šä¹‰ã€‚</p><ul><li>umdæˆ–systemæ¨¡å—: <a href="./src/extras/umdAndSystem.js">wpmjs/src/extras/umdAndSystem.js</a> resolveEntry()</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">umdModule.</span><span style="color:#B392F0;">$getEntry</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;App&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">====</span><span style="color:#E1E4E8;">å†…éƒ¨é€»è¾‘ç­‰äº</span><span style="color:#F97583;">====</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> umdModule[</span><span style="color:#9ECBFF;">&quot;App&quot;</span><span style="color:#E1E4E8;">]()</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">umdModule.</span><span style="color:#6F42C1;">$getEntry</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;App&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">====</span><span style="color:#24292E;">å†…éƒ¨é€»è¾‘ç­‰äº</span><span style="color:#D73A49;">====</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> umdModule[</span><span style="color:#032F62;">&quot;App&quot;</span><span style="color:#24292E;">]()</span></span></code></pre></div><ul><li>module-federationæ¨¡å—: <a href="./src/extras/mf.js">wpmjs/src/extras/mf.js</a> resolveEntry()</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">mfModule.</span><span style="color:#B392F0;">$getEntry</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;App&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">====</span><span style="color:#E1E4E8;">å†…éƒ¨é€»è¾‘ç­‰äº</span><span style="color:#F97583;">====</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> mfModule.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;App&quot;</span><span style="color:#E1E4E8;">))()</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">mfModule.</span><span style="color:#6F42C1;">$getEntry</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;App&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">====</span><span style="color:#24292E;">å†…éƒ¨é€»è¾‘ç­‰äº</span><span style="color:#D73A49;">====</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> mfModule.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;App&quot;</span><span style="color:#24292E;">))()</span></span></code></pre></div><ul><li>jsonæ¨¡å—: <a href="./src/extras/json.js">wpmjs/src/extras/json.js</a> resolveEntry()</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">jsonModule.</span><span style="color:#B392F0;">$getEntry</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;App&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">====</span><span style="color:#E1E4E8;">å†…éƒ¨é€»è¾‘ç­‰äº</span><span style="color:#F97583;">====</span><span style="color:#E1E4E8;"> jsonModule[</span><span style="color:#9ECBFF;">&quot;App&quot;</span><span style="color:#E1E4E8;">]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">jsonModule.</span><span style="color:#6F42C1;">$getEntry</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;App&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">====</span><span style="color:#24292E;">å†…éƒ¨é€»è¾‘ç­‰äº</span><span style="color:#D73A49;">====</span><span style="color:#24292E;"> jsonModule[</span><span style="color:#032F62;">&quot;App&quot;</span><span style="color:#24292E;">]</span></span></code></pre></div></blockquote><h2 id="get" tabindex="-1">get() <a class="header-anchor" href="#get" aria-label="Permalink to &quot;get()&quot;">â€‹</a></h2><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(request: string): any</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(request: string): any</span></span></code></pre></div><p>ä»ç¼“å­˜ä¸­è·å–æŸä¸ªæ¨¡å—çš„åŒæ­¥å€¼, æ¨¡å—åŠ è½½å®Œæ¯•å‰ä¼šè·å–åˆ°undefined</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">import</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// undefined</span></span>
<span class="line"><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> wpmjs.</span><span style="color:#B392F0;">import</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// React</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">import</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// undefined</span></span>
<span class="line"><span style="color:#D73A49;">await</span><span style="color:#24292E;"> wpmjs.</span><span style="color:#6F42C1;">import</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// React</span></span></code></pre></div><h2 id="setshared" tabindex="-1">setShared() <a class="header-anchor" href="#setshared" aria-label="Permalink to &quot;setShared()&quot;">â€‹</a></h2><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">setShared</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// æ¨¡å—å</span></span>
<span class="line"><span style="color:#E1E4E8;">    name: string,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// æ¨¡ç‰ˆç‰ˆæœ¬</span></span>
<span class="line"><span style="color:#E1E4E8;">    version: string,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// æ¨¡å—åŠ è½½å‡½æ•°</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;">()</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Promise</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">any</span><span style="color:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    loaded</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> boolean </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> number;</span></span>
<span class="line"><span style="color:#E1E4E8;">    shareScope</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> string;</span></span>
<span class="line"><span style="color:#E1E4E8;">    fromType</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> string;</span></span>
<span class="line"><span style="color:#E1E4E8;">    from</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> string;</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">setShared</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// æ¨¡å—å</span></span>
<span class="line"><span style="color:#24292E;">    name: string,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// æ¨¡ç‰ˆç‰ˆæœ¬</span></span>
<span class="line"><span style="color:#24292E;">    version: string,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// æ¨¡å—åŠ è½½å‡½æ•°</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">function</span><span style="color:#24292E;">()</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Promise</span><span style="color:#24292E;">&lt;</span><span style="color:#005CC5;">any</span><span style="color:#24292E;">&gt;;</span></span>
<span class="line"><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#24292E;">    loaded</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> boolean </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> number;</span></span>
<span class="line"><span style="color:#24292E;">    shareScope</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> string;</span></span>
<span class="line"><span style="color:#24292E;">    fromType</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> string;</span></span>
<span class="line"><span style="color:#24292E;">    from</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> string;</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div><p>æ³¨å†Œä¸€ä¸ªå…±äº«æ¨¡å—, å…±äº«æ¨¡å—æ”¯æŒå¤šç‰ˆæœ¬å…±å­˜, <em><strong>è‡ªåŠ¨åœ¨umdã€systemã€module-federationåŠå…¶sharedç­‰å„ç§æ¨¡å—ä¹‹é—´è¿›è¡Œå…±äº«å’Œäº’é€š</strong></em></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">setShared</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  name: </span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  version: </span><span style="color:#9ECBFF;">&quot;18.2.0&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// å¯ä»¥å»è¯·æ±‚è¿œç¨‹èµ„æº</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> System.</span><span style="color:#B392F0;">import</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;https://react.js&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// ä¹Ÿå¯è¿”å›æœ¬åœ°å¯¹è±¡</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> {test: </span><span style="color:#79B8FF;">1111</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">setShared</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">  name: </span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  version: </span><span style="color:#032F62;">&quot;18.2.0&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">async</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// å¯ä»¥å»è¯·æ±‚è¿œç¨‹èµ„æº</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> System.</span><span style="color:#6F42C1;">import</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;https://react.js&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// ä¹Ÿå¯è¿”å›æœ¬åœ°å¯¹è±¡</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> {test: </span><span style="color:#005CC5;">1111</span><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div><h2 id="getshared" tabindex="-1">getShared() <a class="header-anchor" href="#getshared" aria-label="Permalink to &quot;getShared()&quot;">â€‹</a></h2><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">getShared</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  name: string;</span></span>
<span class="line"><span style="color:#E1E4E8;">  strictVersion</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> boolean;</span></span>
<span class="line"><span style="color:#E1E4E8;">  singleton</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> boolean;</span></span>
<span class="line"><span style="color:#E1E4E8;">  shareScope</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> string;</span></span>
<span class="line"><span style="color:#E1E4E8;">  requiredVersion</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> string;</span></span>
<span class="line"><span style="color:#E1E4E8;">}): </span><span style="color:#79B8FF;">Promise</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">any</span><span style="color:#F97583;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">getShared</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">  name: string;</span></span>
<span class="line"><span style="color:#24292E;">  strictVersion</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> boolean;</span></span>
<span class="line"><span style="color:#24292E;">  singleton</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> boolean;</span></span>
<span class="line"><span style="color:#24292E;">  shareScope</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> string;</span></span>
<span class="line"><span style="color:#24292E;">  requiredVersion</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> string;</span></span>
<span class="line"><span style="color:#24292E;">}): </span><span style="color:#005CC5;">Promise</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">any</span><span style="color:#D73A49;">&gt;</span></span></code></pre></div><p>åŠ è½½å…±äº«æ¨¡å—</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> wpmjs.</span><span style="color:#B392F0;">getShared</span><span style="color:#E1E4E8;">({name: </span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">})</span></span>
<span class="line"><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> wpmjs.</span><span style="color:#B392F0;">getShared</span><span style="color:#E1E4E8;">({name: </span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">, requiredVersion: </span><span style="color:#9ECBFF;">&quot;18.2.0&quot;</span><span style="color:#E1E4E8;">, singleton: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">await</span><span style="color:#24292E;"> wpmjs.</span><span style="color:#6F42C1;">getShared</span><span style="color:#24292E;">({name: </span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">})</span></span>
<span class="line"><span style="color:#D73A49;">await</span><span style="color:#24292E;"> wpmjs.</span><span style="color:#6F42C1;">getShared</span><span style="color:#24292E;">({name: </span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">, requiredVersion: </span><span style="color:#032F62;">&quot;18.2.0&quot;</span><span style="color:#24292E;">, singleton: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">})</span></span></code></pre></div><h2 id="sleep" tabindex="-1">sleep() <a class="header-anchor" href="#sleep" aria-label="Permalink to &quot;sleep()&quot;">â€‹</a></h2><p>ç­‰å¾…ä¸€æ®µæ—¶é—´ä¹‹åå†å‘èµ·åŠ è½½è¯·æ±‚</p><ol><li>åŠ¨æ€importMap</li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">sleep</span><span style="color:#E1E4E8;">(window.</span><span style="color:#B392F0;">fetch</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;https://importMap.json&quot;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">then</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">res</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> res.</span><span style="color:#B392F0;">json</span><span style="color:#E1E4E8;">())</span></span>
<span class="line"><span style="color:#E1E4E8;">  .</span><span style="color:#B392F0;">then</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">importMap</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    wpmjs.</span><span style="color:#B392F0;">addImportMap</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">      react: {packageVersion: </span><span style="color:#9ECBFF;">&quot;17.0.2&quot;</span><span style="color:#E1E4E8;">},</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">...</span><span style="color:#E1E4E8;">importMap</span></span>
<span class="line"><span style="color:#E1E4E8;">    })</span></span>
<span class="line"><span style="color:#E1E4E8;">  })</span></span>
<span class="line"><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> wpmjs.</span><span style="color:#B392F0;">import</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// 17.0.2</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">sleep</span><span style="color:#24292E;">(window.</span><span style="color:#6F42C1;">fetch</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;https://importMap.json&quot;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">then</span><span style="color:#24292E;">(</span><span style="color:#E36209;">res</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> res.</span><span style="color:#6F42C1;">json</span><span style="color:#24292E;">())</span></span>
<span class="line"><span style="color:#24292E;">  .</span><span style="color:#6F42C1;">then</span><span style="color:#24292E;">(</span><span style="color:#E36209;">importMap</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    wpmjs.</span><span style="color:#6F42C1;">addImportMap</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">      react: {packageVersion: </span><span style="color:#032F62;">&quot;17.0.2&quot;</span><span style="color:#24292E;">},</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">...</span><span style="color:#24292E;">importMap</span></span>
<span class="line"><span style="color:#24292E;">    })</span></span>
<span class="line"><span style="color:#24292E;">  })</span></span>
<span class="line"><span style="color:#D73A49;">await</span><span style="color:#24292E;"> wpmjs.</span><span style="color:#6F42C1;">import</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// 17.0.2</span></span></code></pre></div><h2 id="constructor" tabindex="-1">constructor() <a class="header-anchor" href="#constructor" aria-label="Permalink to &quot;constructor()&quot;">â€‹</a></h2><p>åˆ›å»ºæ–°çš„wpmjså®ä¾‹</p><ol><li>å¤šç‰ˆæœ¬å…±å­˜</li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">wpmjs</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> window.wpmjs</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">wpmjs1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> wpmjs.</span><span style="color:#B392F0;">constructor</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// æ‰“å°é”™è¯¯ä¿¡æ¯æ—¶ä¼šé™„å¸¦name</span></span>
<span class="line"><span style="color:#E1E4E8;">  name: </span><span style="color:#9ECBFF;">&quot;wpmjs1&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">addImportMap</span><span style="color:#E1E4E8;">({ packageName: </span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">, packageVersion: </span><span style="color:#9ECBFF;">&quot;18.2.0&quot;</span><span style="color:#E1E4E8;">, strictVersion: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;"> })</span></span>
<span class="line"><span style="color:#E1E4E8;">wpmjs1.</span><span style="color:#B392F0;">addImportMap</span><span style="color:#E1E4E8;">({ packageName: </span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">, packageVersion: </span><span style="color:#9ECBFF;">&quot;17.0.2&quot;</span><span style="color:#E1E4E8;">, strictVersion: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;"> })</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">import</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// 18.2.0</span></span>
<span class="line"><span style="color:#E1E4E8;">wpmjs1.</span><span style="color:#B392F0;">import</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// 17.0.2</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">wpmjs</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> window.wpmjs</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">wpmjs1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> wpmjs.</span><span style="color:#6F42C1;">constructor</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// æ‰“å°é”™è¯¯ä¿¡æ¯æ—¶ä¼šé™„å¸¦name</span></span>
<span class="line"><span style="color:#24292E;">  name: </span><span style="color:#032F62;">&quot;wpmjs1&quot;</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">addImportMap</span><span style="color:#24292E;">({ packageName: </span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">, packageVersion: </span><span style="color:#032F62;">&quot;18.2.0&quot;</span><span style="color:#24292E;">, strictVersion: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;"> })</span></span>
<span class="line"><span style="color:#24292E;">wpmjs1.</span><span style="color:#6F42C1;">addImportMap</span><span style="color:#24292E;">({ packageName: </span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">, packageVersion: </span><span style="color:#032F62;">&quot;17.0.2&quot;</span><span style="color:#24292E;">, strictVersion: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;"> })</span></span>
<span class="line"><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">import</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// 18.2.0</span></span>
<span class="line"><span style="color:#24292E;">wpmjs1.</span><span style="color:#6F42C1;">import</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// 17.0.2</span></span></code></pre></div><h2 id="system" tabindex="-1">System <a class="header-anchor" href="#system" aria-label="Permalink to &quot;System&quot;">â€‹</a></h2><p>ä½¿ç”¨<a href="https://npmjs.com/package/systemjs-intercept" target="_blank" rel="noreferrer">systemjs-intercept</a>æ‹¦æˆªäº†åŠ è½½è¿‡ç¨‹çš„systemjså®ä¾‹, è¿™ä¸ªå®ä¾‹åŠ è½½çš„æ¨¡å—åŠä¾èµ–ä¼šä½¿ç”¨wpmjsæ¥å¯»æ‰¾</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wpmjs.System.</span><span style="color:#B392F0;">import</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;react-dom&quot;</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wpmjs.System.</span><span style="color:#6F42C1;">import</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;react-dom&quot;</span><span style="color:#24292E;">)</span></span></code></pre></div><h2 id="registerloader" tabindex="-1">registerLoader() <a class="header-anchor" href="#registerloader" aria-label="Permalink to &quot;registerLoader()&quot;">â€‹</a></h2><p>æ³¨å†Œæ–°çš„æ¨¡å—ç±»å‹ä¸å…¶åŠ è½½å™¨, ä¾‹:</p><ol><li>åˆ›å»ºä¸€ä¸ªcssåŠ è½½å™¨<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">registerLoader</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">    moduleType: </span><span style="color:#9ECBFF;">&quot;css&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">resolveUrl</span><span style="color:#E1E4E8;">({</span><span style="color:#FFAB70;">name</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">version</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">query</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">entry</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">filename</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">baseUrl</span><span style="color:#E1E4E8;">}) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">https</span><span style="color:#F97583;">?</span><span style="color:#DBEDFF;">:</span><span style="color:#85E89D;font-weight:bold;">\\/\\/</span><span style="color:#DBEDFF;">(localhost</span><span style="color:#F97583;">|</span><span style="color:#DBEDFF;">(</span><span style="color:#79B8FF;">\\d</span><span style="color:#F97583;">+</span><span style="color:#85E89D;font-weight:bold;">\\.</span><span style="color:#DBEDFF;">)</span><span style="color:#F97583;">{2}</span><span style="color:#DBEDFF;">)</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(baseUrl)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">\`\${</span><span style="color:#E1E4E8;">baseUrl</span><span style="color:#9ECBFF;">}/\${</span><span style="color:#E1E4E8;">filename</span><span style="color:#9ECBFF;">}\`</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">        query </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> query </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;?&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> query </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        filename </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> filename </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;/&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> filename </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        version </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> version </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;@&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> version </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">\`\${</span><span style="color:#E1E4E8;">baseUrl</span><span style="color:#9ECBFF;">}/\${</span><span style="color:#E1E4E8;">name</span><span style="color:#9ECBFF;">}\${</span><span style="color:#E1E4E8;">version</span><span style="color:#9ECBFF;">}\${</span><span style="color:#E1E4E8;">filename</span><span style="color:#9ECBFF;">}\${</span><span style="color:#E1E4E8;">query</span><span style="color:#9ECBFF;">}\`</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">resolveContainer</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">url</span><span style="color:#E1E4E8;">, {</span><span style="color:#FFAB70;">requestObj</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">pkgConfig</span><span style="color:#E1E4E8;">}) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> link </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> document.</span><span style="color:#B392F0;">createElement</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;link&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        link.href </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> url</span></span>
<span class="line"><span style="color:#E1E4E8;">        document.head.</span><span style="color:#B392F0;">appendChild</span><span style="color:#E1E4E8;">(link)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> link</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">resolveEntry</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">container</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">entry</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">null</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">addImportMap</span><span style="color:#E1E4E8;">({ testCss: { packageName: </span><span style="color:#9ECBFF;">&quot;antd@0.0.1/dist/index.css&quot;</span><span style="color:#E1E4E8;">, moduleType: </span><span style="color:#9ECBFF;">&quot;css&quot;</span><span style="color:#E1E4E8;"> } })</span></span>
<span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">import</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;testCss&quot;</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">registerLoader</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">    moduleType: </span><span style="color:#032F62;">&quot;css&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">resolveUrl</span><span style="color:#24292E;">({</span><span style="color:#E36209;">name</span><span style="color:#24292E;">, </span><span style="color:#E36209;">version</span><span style="color:#24292E;">, </span><span style="color:#E36209;">query</span><span style="color:#24292E;">, </span><span style="color:#E36209;">entry</span><span style="color:#24292E;">, </span><span style="color:#E36209;">filename</span><span style="color:#24292E;">, </span><span style="color:#E36209;">baseUrl</span><span style="color:#24292E;">}) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#032F62;">/https</span><span style="color:#D73A49;">?</span><span style="color:#032F62;">:</span><span style="color:#22863A;font-weight:bold;">\\/\\/</span><span style="color:#032F62;">(localhost</span><span style="color:#D73A49;">|</span><span style="color:#032F62;">(</span><span style="color:#005CC5;">\\d</span><span style="color:#D73A49;">+</span><span style="color:#22863A;font-weight:bold;">\\.</span><span style="color:#032F62;">)</span><span style="color:#D73A49;">{2}</span><span style="color:#032F62;">)/</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(baseUrl)) {</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#032F62;">\`\${</span><span style="color:#24292E;">baseUrl</span><span style="color:#032F62;">}/\${</span><span style="color:#24292E;">filename</span><span style="color:#032F62;">}\`</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">        query </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> query </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;?&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> query </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;&quot;</span></span>
<span class="line"><span style="color:#24292E;">        filename </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> filename </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;/&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> filename </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;&quot;</span></span>
<span class="line"><span style="color:#24292E;">        version </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> version </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;@&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> version </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;&quot;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#032F62;">\`\${</span><span style="color:#24292E;">baseUrl</span><span style="color:#032F62;">}/\${</span><span style="color:#24292E;">name</span><span style="color:#032F62;">}\${</span><span style="color:#24292E;">version</span><span style="color:#032F62;">}\${</span><span style="color:#24292E;">filename</span><span style="color:#032F62;">}\${</span><span style="color:#24292E;">query</span><span style="color:#032F62;">}\`</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">resolveContainer</span><span style="color:#24292E;">(</span><span style="color:#E36209;">url</span><span style="color:#24292E;">, {</span><span style="color:#E36209;">requestObj</span><span style="color:#24292E;">, </span><span style="color:#E36209;">pkgConfig</span><span style="color:#24292E;">}) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">var</span><span style="color:#24292E;"> link </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> document.</span><span style="color:#6F42C1;">createElement</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;link&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">        link.href </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> url</span></span>
<span class="line"><span style="color:#24292E;">        document.head.</span><span style="color:#6F42C1;">appendChild</span><span style="color:#24292E;">(link)</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> link</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">resolveEntry</span><span style="color:#24292E;">(</span><span style="color:#E36209;">container</span><span style="color:#24292E;">, </span><span style="color:#E36209;">entry</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">null</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">addImportMap</span><span style="color:#24292E;">({ testCss: { packageName: </span><span style="color:#032F62;">&quot;antd@0.0.1/dist/index.css&quot;</span><span style="color:#24292E;">, moduleType: </span><span style="color:#032F62;">&quot;css&quot;</span><span style="color:#24292E;"> } })</span></span>
<span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">import</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;testCss&quot;</span><span style="color:#24292E;">)</span></span></code></pre></div></li><li>è‡ªå®šä¹‰systemæ¨¡å—çš„åŠ è½½è¡Œä¸ºï¼ˆå¦‚urlè§„åˆ™ã€æ‰§è¡Œjsçš„æ–¹å¼ç­‰ï¼‰<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">registerLoader</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">resolveUrl</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> url</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">resolveContainer</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">url</span><span style="color:#E1E4E8;">, {</span><span style="color:#FFAB70;">requestObj</span><span style="color:#E1E4E8;">}) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">eval</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">fetch</span><span style="color:#E1E4E8;">(url)).</span><span style="color:#B392F0;">text</span><span style="color:#E1E4E8;">())</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> window[requestObj.name]</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">resolveEntry</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">container</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">entry</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> container[entry]</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">registerLoader</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">resolveUrl</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> url</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">async</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">resolveContainer</span><span style="color:#24292E;">(</span><span style="color:#E36209;">url</span><span style="color:#24292E;">, {</span><span style="color:#E36209;">requestObj</span><span style="color:#24292E;">}) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">eval</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">fetch</span><span style="color:#24292E;">(url)).</span><span style="color:#6F42C1;">text</span><span style="color:#24292E;">())</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> window[requestObj.name]</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">resolveEntry</span><span style="color:#24292E;">(</span><span style="color:#E36209;">container</span><span style="color:#24292E;">, </span><span style="color:#E36209;">entry</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> container[entry]</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div></li></ol><h2 id="debug" tabindex="-1">debug() <a class="header-anchor" href="#debug" aria-label="Permalink to &quot;debug()&quot;">â€‹</a></h2><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wpmjs.</span><span style="color:#B392F0;">debug</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">    baseUrl: string; </span><span style="color:#6A737D;">// develop-panelä¼šéœ€è¦ç”¨åˆ°ä¸€äº›è¿œç¨‹npmåŒ…, æ­¤å¤„ä¸ºå®ƒè®¾ç½®æº</span></span>
<span class="line"><span style="color:#E1E4E8;">    plugins: Array</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">string</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// wpm-develop-panelæ˜¯ä¸€ä¸ªè°ƒè¯•é¢æ¿, å¯ä»¥åµŒå…¥ä¸€äº›è°ƒè¯•å·¥å…·, æ­¤å¤„å¯ä»¥é…ç½®å·¥å…·å, ä¼šè‡ªåŠ¨å»åŠ è½½wpm-develop-\${plugins[index]}å¯¹åº”çš„npmåŒ…</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wpmjs.</span><span style="color:#6F42C1;">debug</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">    baseUrl: string; </span><span style="color:#6A737D;">// develop-panelä¼šéœ€è¦ç”¨åˆ°ä¸€äº›è¿œç¨‹npmåŒ…, æ­¤å¤„ä¸ºå®ƒè®¾ç½®æº</span></span>
<span class="line"><span style="color:#24292E;">    plugins: Array</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">string</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// wpm-develop-panelæ˜¯ä¸€ä¸ªè°ƒè¯•é¢æ¿, å¯ä»¥åµŒå…¥ä¸€äº›è°ƒè¯•å·¥å…·, æ­¤å¤„å¯ä»¥é…ç½®å·¥å…·å, ä¼šè‡ªåŠ¨å»åŠ è½½wpm-develop-\${plugins[index]}å¯¹åº”çš„npmåŒ…</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div><p>æ‰“å¼€è°ƒè¯•é¢æ¿, å¯ä»¥ä½¿ç”¨ç³»ç»Ÿæ’ä»¶å’Œè‡ªå®šä¹‰æ’ä»¶</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">window.wpmjsDebug.</span><span style="color:#B392F0;">debug</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">    baseUrl: </span><span style="color:#9ECBFF;">&quot;https://cdn.jsdelivr.net/npm&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    plugins: [</span><span style="color:#9ECBFF;">&quot;connect&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;alias&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">window.wpmjsDebug.</span><span style="color:#6F42C1;">debug</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">    baseUrl: </span><span style="color:#032F62;">&quot;https://cdn.jsdelivr.net/npm&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    plugins: [</span><span style="color:#032F62;">&quot;connect&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;alias&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div>`,62),t=[e];function c(r,E,y,i,u,d){return a(),n("div",null,t)}const g=s(o,[["render",c]]);export{m as __pageData,g as default};
